
# Example configuration template.
# Copy what you need into `application-local.yaml` (or your own profile file).

spring:
	application:
		name: persimmon
	datasource:
		url: jdbc:postgresql://localhost:5432/persimmon_scaffold
		username: postgres
		password: postgres
	flyway:
		enabled: true
		baselineOnMigrate: true
		locations: classpath:db/migration
		# MUST set false to true in production
		clean-disabled: false
		baseline-version: 0.0.0
	kafka:
		bootstrap-servers: localhost:9092
		consumer:
			group-id: ${spring.application.name}

server:
	port: 9080

mybatis-plus:
	global-config:
		db-config:
			logic-delete-field: deletedAt
			logic-delete-value: now()
			logic-not-delete-value: null

persimmon:
	outbox:
		# Options: kafka | (unset -> logging/noop)
		transport: kafka
		retry:
			base-seconds: 1
			max-seconds: 300
			max-attempts: 10
		relay:
			worker-id: local
			lease-seconds: 30
			batch-size: 100
			fixed-delay-ms: 1000
		kafka:
			topic: persimmon-outbox
			send-timeout-ms: 5000
			consumer-group: persimmon-outbox-consumer
			consumer-concurrency: 1
